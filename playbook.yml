---
- hosts: all
  become: true
  vars_prompt:
    - name: user_password
      prompt: "Enter desired user password"
      default: "password"
  handlers:
    - name: Regenerate grub.cfg
      command: grub-mkconfig -o /boot/grub/grub.cfg
    - name: Regenerate mkinitcpio ramdisk
      command: mkinitcpio -p linux
    - name: Reload i3
      command: i3-msg restart
      register: i3_restart_result
      failed_when: i3_restart_result.rc not in [0, 1]
  tasks:
    - include: tasks/packaging.yml
    - include: tasks/boot.yml
    - include: tasks/user.yml
    - include: tasks/networking.yml
    - include: tasks/cli-tools.yml
    - include: tasks/power.yml
    - include: tasks/vagrant-guest.yml
    - include: tasks/gui.yml
    - include: tasks/gui-apps.yml
    - include: tasks/fonts.yml
    - include: tasks/multitouch.yml

# Disk
  # Disable journaling
  # Other stuff from https://github.com/alghanmi/ubuntu-desktop_setup/wiki/SSD-Configuration-on-Linux
# Limit journald total and max file sizes - https://github.com/groks/ansible-systemd-journal/blob/master/tasks/main.yml
# Power management
# Time sync
# Remove psmouse errors from dmesg
# Audio
# GUI
# Mouse input
# Printing
# PLs
  # Ruby
  # Python
  # Rust
  # Node
  # Java
# Users
  # mnussbaum
  #   dotfiles
  #   editor
  #   shell
# GUI Apps
  # music
  # video
  # browsers
  # PDF
  # notepad
  # dropbox
  # Littlesnitch replacemend
# Password sync
